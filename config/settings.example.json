{
  "timezone": "Asia/Tokyo",
  "cooldown": {
    "window_sec": 1800,
    "mult_min": 1.0,
    "mult_max": 6.0,
    "coeff": { "rate": 0.5, "time": 0.8, "eng": 0.6 },
    "time_bands": [
      { "range": ["05:00","09:00"], "factor": 1.5 },
      { "range": ["23:00","05:00"], "factor": 1.2 }
    ],
    "jobs": {
      "dm_digest": { "base_gap_sec": 21600, "priority": 30 },
      "news":      { "base_gap_sec": 1800, "priority": 50, "coalesce_window_sec": 900 },
      "omikuji":   { "base_gap_sec": 10800,"priority": 10 },
      "weather":   { "base_gap_sec": 86400,"priority": 80 }
    }
  },
  "quota": { "per_channel": { "day": 20, "window_min": 30, "burst_limit": 5 } },
  "arbiter": { "jitter_sec": [60, 180] },
  "dedupe": { "enabled": true, "recent_k": 20, "sim_threshold": 0.93 },
  "limits": {
    "_usage": "制限設定サンプル。⚠️ 現行実装では未対応のため、実装が揃うまでは有効化しないこと",
    "max_lines_night": 4,
    "max_emojis_night": 1
  },
  "report": {
    "_usage": "週次サマリ機能: enabled を true にすると指定スケジュールで週間レポートを生成し、permit.channel で指定した通知チャンネルへ送信する",
    "enabled": false,
    "job": "weekly_report",
    "schedule": "Monday 09:00",
    "channel": "ops-weekly",
    "priority": 3,
    "permit": {
      "_usage": "PermitGate を通す際に使用するプラットフォーム/チャンネル/ジョブ識別子",
      "platform": "discord",
      "channel": "ops-weekly",
      "job": "weekly_report"
    },
    "template": {
      "_usage": "週次メトリクスの通知本文テンプレート (タイトル/本文/フッターを `{placeholders}` で整形)",
      "title": "📊 運用サマリ ({week_range})",
      "line": "・{label}: {value}",
      "footer": "詳細は運用ダッシュボードを参照"
    }
  },
  "metrics": {
    "_usage": "ランタイムメトリクスの収集/エクスポート設定。infra/metrics/aggregator.py・infra/metrics/aggregator_state.py・infra/metrics/service.py で利用される構成を retention_days で保持日数(既定7日)と共に指定",
    "backend": "memory",
    "retention_days": 14,
    "export": {
      "_usage": "メトリクスのエクスポート設定サンプル。⚠️ 現行実装は未対応のため、設定を変更しても送信は行われない",
      "enabled": false,
      "destination": "stdout"
    }
  },
  "weather": {
    "schedule": "21:00",
    "thresholds": { "hot_30": 30.0, "hot_35": 35.0, "delta_warn": 7.0, "delta_strong": 10.0 },
    "icons": { "hot_30": "🌡️", "hot_35": "🔥", "delta_up": "🔺", "delta_down": "🔻", "warn": "⚠️" },
    "cities": {
      "関東": ["Tokyo", "Yokohama"],
      "関西": ["Osaka", "Kyoto"]
    },
    "template": {
      "header": "🗓️ 今夜の各地の天気",
      "line": "{city}: {temp:.1f}℃ {desc} {hot_icon}{delta_tag}",
      "footer_warn": "— 注意喚起 —\n{bullets}"
    },
    "engagement": {
      "_history_provider_usage": "ドット区切り（module.attr もしくは module:path）で ReactionHistoryProvider を指定する",
      "history_provider": "llm_generic_bot.runtime.history.SAMPLE_REACTION_HISTORY",
      "history_limit": 5,
      "target_reactions": 5,
      "min_score": 0.2,
      "resume_score": 0.5,
      "time_band_factor": 1.0
    }
  },
  "news": {
    "_provider_reference_usage": "feed_provider と summary_provider はドット区切り（module.attr もしくは module:path）で呼び出し可能なオブジェクトを指定する",
    "enabled": true,
    "job": "news",
    "schedule": ["07:30", "19:30"],
    "channel": "discord-news",
    "priority": 8,
    "feed_url": "https://example.com/news/feed.xml",
    "feed_provider": "llm_generic_bot.runtime.providers.SAMPLE_NEWS_FEED",
    "summary_provider": "llm_generic_bot.runtime.providers.SAMPLE_NEWS_SUMMARY",
    "language": "ja",
    "template": {
      "header": "📰 今日のニュースまとめ",
      "item": "・{title}: {summary} ({link})",
      "footer": "#news ハッシュタグで反応をシェア"
    },
    "suppress_cooldown": false
  },
  "omikuji": {
    "enabled": true,
    "job": "omikuji",
    "schedule": "09:00",
    "channel": "fortune",
    "priority": 6,
    "user_id": "user-1234567890",
    "templates": [
      { "id": "basic", "text": "{user} さんの運勢は {fortune} です" }
    ],
    "fortunes": ["大吉", "中吉", "小吉", "凶"],
    "history_window_days": 30
  },
  "dm_digest": {
    "_provider_reference_usage": "log_provider・summary_provider・sender はドット区切り（module.attr もしくは module:path）で指定する",
    "enabled": true,
    "job": "dm_digest",
    "schedule": "22:00",
    "priority": 4,
    "source_channel": "support-dm",
    "recipient_id": "user-recipient-0001",
    "log_provider": "llm_generic_bot.runtime.providers.SAMPLE_DM_LOG",
    "summary_provider": "llm_generic_bot.runtime.providers.SAMPLE_DM_SUMMARY",
    "sender": "llm_generic_bot.runtime.providers.SAMPLE_DM_SENDER",
    "max_events": 20,
    "max_attempts": 2,
    "channel": null
  },
  "profiles": {
    "discord": { "enabled": true },
    "misskey": { "enabled": false }
  }
}
